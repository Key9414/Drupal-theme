{#
/**
 * @file
 * Bayteq Developer Portal - API Detail Page.
 *
 * Pantalla 4: Detalle de API - Payment API
 * Incluye: header con badges, tabs, descripción, código, sidebar info
 *
 * Variables esperadas (desde preprocess o nodo):
 * - api_name: Nombre de la API
 * - api_version: Versión
 * - api_status: 'active' | 'deprecated'
 * - api_description: Descripción corta
 * - api_base_url: URL base
 * - api_protocol: Protocolo (HTTPS / REST)
 * - api_auth: Tipo de autenticación
 * - api_rate_limit: Rate limit
 * - api_sla: SLA uptime
 */
#}

{% extends "page.html.twig" %}

{% block content %}
<div class="api-detail">
  <div class="container">
    {# Back Link #}
    <a href="/apis" class="back-link">
      <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/></svg>
      {{ 'Volver al catálogo'|t }}
    </a>

    {# ========== API HEADER ========== #}
    <div class="api-detail__header">
      <div class="api-detail__title-section">
        <div class="api-detail__icon">
          <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633z" clip-rule="evenodd"/></svg>
        </div>
        <div class="api-detail__title-group">
          <div class="api-detail__title-row">
            <h1 class="api-detail__name">{{ api_name|default('Payment API') }}</h1>
            <span class="badge badge-version">{{ api_version|default('v2.1') }}</span>
            <span class="badge badge-active">{{ 'Activa'|t }}</span>
          </div>
          <p class="api-detail__desc">{{ api_description|default('API completa para procesar pagos, reembolsos y gestión de transacciones'|t) }}</p>
          <div class="api-detail__meta">
            <span>{{ 'Versión:'|t }} 2.1.0</span>
            <span>{{ 'Última actualización:'|t }} 10 Feb 2026</span>
            <span class="rating">
              <span class="rating__star">&#9733;</span>
              <span class="rating__value">4.8</span>
              <span class="rating__count">(124 {{ 'valoraciones'|t }})</span>
            </span>
          </div>
        </div>
      </div>

      <div class="api-detail__actions">
        <a href="#" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
          OpenAPI Spec
        </a>
        <a href="#" class="btn btn-primary">{{ 'Suscribirse'|t }}</a>
      </div>
    </div>

    {# ========== TABS ========== #}
    <div class="api-tabs">
      <button class="api-tab is-active" data-tab="resumen">{{ 'Resumen'|t }}</button>
      <button class="api-tab" data-tab="endpoints">{{ 'Endpoints'|t }}</button>
      <button class="api-tab" data-tab="seguridad">{{ 'Seguridad'|t }}</button>
      <button class="api-tab" data-tab="documentacion">{{ 'Documentación'|t }}</button>
    </div>

    {# ========== CONTENT LAYOUT ========== #}
    <div class="api-detail__layout">
      {# Main Content #}
      <div class="api-detail__content">
        {# Description Section #}
        <div class="content-section" data-tab-content="resumen">
          <h2 class="content-section__title">{{ 'Descripción'|t }}</h2>
          <p class="content-section__text">
            {{ 'La Payment API de Bayteq proporciona una solución completa y segura para procesar pagos en línea. Soporta múltiples métodos de pago, monedas y proveedores de procesamiento de pagos.'|t }}
          </p>
          <p class="content-section__text">
            {{ 'Esta API está diseñada siguiendo los estándares PCI DSS Level 1 y utiliza encriptación de extremo a extremo para garantizar la seguridad de los datos financieros.'|t }}
          </p>

          <h3 class="content-section__title">{{ 'Características principales'|t }}</h3>
          <div class="feature-list">
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Procesamiento de pagos con tarjeta de crédito/débito'|t }}</span>
            </div>
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Soporte para billeteras digitales (Apple Pay, Google Pay)'|t }}</span>
            </div>
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Gestión de reembolsos y cancelaciones'|t }}</span>
            </div>
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Pagos recurrentes y suscripciones'|t }}</span>
            </div>
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Webhooks para notificaciones en tiempo real'|t }}</span>
            </div>
            <div class="feature-item">
              <svg class="feature-item__icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
              <span>{{ 'Reporting y análisis de transacciones'|t }}</span>
            </div>
          </div>
        </div>

        {# Quick Start Section #}
        <div class="content-section">
          <h2 class="content-section__title">{{ 'Inicio Rápido'|t }}</h2>
          <p class="content-section__text">{{ 'Ejemplo básico de cómo crear una transacción de pago:'|t }}</p>

          <div class="code-block">
            <div class="code-block__header">
              <div>
                <span class="code-block__method">POST</span>
                <span class="code-block__endpoint">/v2/payments</span>
              </div>
              <button class="code-block__copy" data-copy-target="code-payment">
                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"/><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"/></svg>
                {{ 'Copiar'|t }}
              </button>
            </div>
            <div class="code-block__body">
              <pre id="code-payment">curl -X POST https://api.bayteq.com/v2/payments \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 10000,
    "currency": "USD",
    "payment_method": {
      "type": "card",
      "card": {
        "number": "4242424242424242",
        "exp_month": 12,
        "exp_year": 2026,
        "cvc": "123"
      }
    }
  }'</pre>
            </div>
          </div>
        </div>
      </div>

      {# ========== SIDEBAR ========== #}
      <aside class="sidebar info-sidebar">
        {# Information Box #}
        <div class="info-box">
          <h3 class="info-box__title">{{ 'Información'|t }}</h3>
          <div class="info-box__item">
            <div class="info-box__label">Base URL</div>
            <div class="info-box__value info-box__value--mono">api.bayteq.com/v2</div>
          </div>
          <div class="info-box__item">
            <div class="info-box__label">{{ 'Protocolo'|t }}</div>
            <div class="info-box__value">HTTPS / REST</div>
          </div>
          <div class="info-box__item">
            <div class="info-box__label">{{ 'Autenticación'|t }}</div>
            <div class="info-box__value">OAuth 2.0, API Key</div>
          </div>
          <div class="info-box__item">
            <div class="info-box__label">Rate Limit</div>
            <div class="info-box__value">1000 req/min</div>
          </div>
          <div class="info-box__item">
            <div class="info-box__label">SLA</div>
            <div class="info-box__value">99.9% uptime</div>
          </div>
        </div>

        {# Tags Box #}
        <div class="info-box">
          <h3 class="info-box__title">Tags</h3>
          <div class="api-card__tags">
            <span class="tag">Pagos</span>
            <span class="tag">Finanzas</span>
            <span class="tag">PCI Compliant</span>
            <span class="tag">E-commerce</span>
            <span class="tag">REST API</span>
          </div>
        </div>

        {# Resources Box #}
        <div class="info-box">
          <h3 class="info-box__title">{{ 'Recursos'|t }}</h3>
          <div class="resource-list">
            <a href="#" class="resource-link">
              <span>{{ 'Documentación completa'|t }}</span>
              <svg class="resource-link__icon" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/></svg>
            </a>
            <a href="#" class="resource-link">
              <span>{{ 'SDKs y librerías'|t }}</span>
              <svg class="resource-link__icon" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/></svg>
            </a>
            <a href="#" class="resource-link">
              <span>{{ 'Ejemplos de código'|t }}</span>
              <svg class="resource-link__icon" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/></svg>
            </a>
            <a href="#" class="resource-link">
              <span>Changelog</span>
              <svg class="resource-link__icon" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/></svg>
            </a>
          </div>
        </div>

        {# Support Box #}
        <div class="support-box">
          <div class="support-box__icon">&#128172;</div>
          <h4 class="support-box__title">{{ '¿Necesitas ayuda?'|t }}</h4>
          <p class="support-box__text">{{ 'Nuestro equipo de soporte está disponible para ayudarte con la integración.'|t }}</p>
          <a href="/contacto" class="btn btn-secondary btn-block">{{ 'Contactar soporte'|t }}</a>
        </div>
      </aside>
    </div>
  </div>
</div>

{{ page.content }}
{% endblock %}
